# Ø«Ø¨Øª Ù…ÙƒØªØ¨Ø© PySocks (Ù„Ùˆ Ù…Ø´ Ù…ÙˆØ¬ÙˆØ¯Ø©)
!pip install -q PySocks

import requests
import socket
import socks
import concurrent.futures

# â›“ï¸ Ù…ØµØ¯Ø± Ù…Ø¨Ø§Ø´Ø± Ù…Ù† GitHub
url = "https://raw.githubusercontent.com/monosans/proxy-list/main/proxies/socks5.txt"

# ğŸ§¾ Ù†Ø³Ø­Ø¨ Ø§Ù„Ø¨Ø±ÙˆÙƒØ³ÙŠØ§Øª
print("ğŸ”„ Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨Ø±ÙˆÙƒØ³ÙŠØ§Øª Ù…Ù† GitHub...")
proxies = []

try:
    r = requests.get(url, timeout=10)
    if r.status_code == 200:
        lines = r.text.strip().split('\n')
        proxies = [line.strip() for line in lines if ':' in line]
        print(f"âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ {len(proxies)} Ø¨Ø±ÙˆÙƒØ³ÙŠ Ù…Ù† GitHub.")
    else:
        print("âŒ ÙØ´Ù„ Ø§Ù„ØªØ­Ù…ÙŠÙ„: ÙƒÙˆØ¯ Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©", r.status_code)
except Exception as e:
    print("âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„:", e)

# ğŸ§  Ø¯Ø§Ù„Ø© ÙØ­Øµ Ø§Ù„Ø¨Ø±ÙˆÙƒØ³ÙŠ
def check_proxy(proxy):
    ip, port = proxy.split(":")
    try:
        socks.setdefaultproxy(socks.SOCKS5, ip, int(port), True)
        socket.socket = socks.socksocket
        sock = socket.socket()
        sock.settimeout(5)
        sock.connect(("httpbin.org", 80))
        sock.close()
        print(f"âœ… Ø´ØºÙ‘Ø§Ù„: {proxy}")
        return proxy
    except:
        return None

# âš™ï¸ ØªÙ†ÙÙŠØ° Ø§Ù„ÙØ­Øµ
print(f"\nğŸ” Ø¬Ø§Ø±ÙŠ ÙØ­Øµ {len(proxies)} Ø¨Ø±ÙˆÙƒØ³ÙŠ...\n")
working = []
with concurrent.futures.ThreadPoolExecutor(max_workers=100) as executor:
    results = executor.map(check_proxy, proxies)
    for result in results:
        if result:
            working.append(result)

# ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¨Ø±ÙˆÙƒØ³ÙŠØ§Øª Ø§Ù„Ø´ØºØ§Ù„Ø©
with open("working_socks5.txt", "w") as f:
    f.write("\n".join(working))

print(f"\nğŸ¯ Ø¹Ø¯Ø¯ Ø§Ù„Ø¨Ø±ÙˆÙƒØ³ÙŠØ§Øª Ø§Ù„Ø´ØºØ§Ù„Ø©: {len(working)}")
print("ğŸ“ ØªÙ… Ø­ÙØ¸Ù‡Ù… ÙÙŠ Ù…Ù„Ù: working_socks5.txt")
